extends layout

block content
    div.content
        h1= 'Test: ' + test.title
        p This is a test for the #[a(href='/tech/' + techId + '/' + featureId) #{data.title}] feature.
        p= 'Support Level: ' + helper.generateSupportString(test.core_support)
        p= test.description

        h2 Run the test
        h3 Test HTML
        pre
            code= testHTML
        a(href='/test_data/' + techId + '/' + featureId + '/' + test.id + '.html') Open test HTML to run the test

        if (test.sr_instructions)
            h3 Screen Reader Instructions
            p= test.sr_instructions

        if (test.vc_instructions)
            h3 Voice Command Instructions
            p= test.vc_instructions

        h2 Support tables
        table
            caption core support
            tr
                th AT
                th Browser
                th Support
                th Action
            each at in helper.core_at
                each browser in helper.at[at].core_browsers
                    tr
                        td= helper.at[at].title
                            if test.at[at].browsers[browser].at_version
                                span= ' ' + test.at[at].browsers[browser].at_version
                        td= helper.browsers[browser].title
                            if test.at[at].browsers[browser].browser_version
                                span= ' ' + test.at[at].browsers[browser].browser_version
                        td(class='support-case '+test.at[at].browsers[browser].support)= test.at[at].browsers[browser].support
                        td
                            a(href='#') Submit a change
        br
        table
            caption extended support
            tr
                th AT
                th Browser
                th Support
                th Action
            each at in helper.at
                - var browsers = at.extended_browsers
                if helper.extended_at.includes(at.id)
                    - var browsers = browsers.concat(at.core_browsers)
                each browser in browsers
                    tr
                        td= at.title
                            if test.at[at.id].browsers[browser].at_version
                                span= ' ' + test.at[at.id].browsers[browser].at_version
                        td= helper.browsers[browser].title
                            if test.at[at.id].browsers[browser].browser_version
                                span= ' ' + test.at[at.id].browsers[browser].browser_version
                        td= test.at[at.id].browsers[browser].support
                        td
                            a(href='#') Submit a change
    div.sidebar
        h2 Is something not right?
        p Use the support tables to report issues or changes for different combinations.
