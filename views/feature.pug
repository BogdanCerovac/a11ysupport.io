extends layout

block content
  div.content
    h1= data.title
    div(class="current-support-container "+data.core_support_string.replace(" ", "-"))
      p= 'Support level: ' + data.core_support_string
    p= data.description

    if data.tests.length > 1
      table
        caption Test Overview
        tr
          th Test
          th Support
        each test, index in data.tests
            tr
              td
                a(href='#'+test.id) #{test.title}
              td= test.core_support_string

    h2 Summary of tests
    each test, index in data.tests
      a(href='/tests/' + test.id)
        h3(id=test.id)= test.title
      p= 'Support level: ' + test.core_support_string
      p= test.description
      table
        caption #{test.title} Support (for core combinations)
        tr
          th AT
          th Browser
          th Support
        each at in ATBrowsers.core_at
          each browser in ATBrowsers.at[at].core_browsers
            tr
              td= ATBrowsers.at[at].title
                if test.at[at].browsers[browser].at_version
                    span= ' ' + test.at[at].browsers[browser].at_version
              td= ATBrowsers.browsers[browser].title
                if (test.at[at].browsers[browser].browser_version)
                    span= ' ' + test.at[at].browsers[browser].browser_version
              td(class='support-case '+test.at[at].browsers[browser].support)= test.at[at].browsers[browser].support
      a(href='/tests/' + test.id) Learn more about the #{test.title} test
  if data.references
    div.sidebar
      h2 Is something not right?
      p Please open an issue if you find anything that is wrong or incomplete.
      h2 References
      ul
        each reference in data.references
          li
            a(href=reference.url) #{reference.title}
